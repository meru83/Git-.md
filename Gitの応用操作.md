## ステップ5: Gitの応用操作

[目次に戻る](git学習目次.md)

ここでは、Gitの高度な操作である`reset`、`revert`、`rebase`について解説します。これらのコマンドを適切に使用することで、履歴の管理や変更の取り消しが効率的に行えます。

### 1. `git reset`

`git reset`は、指定したコミットまでリポジトリの状態を戻すコマンドです。主に以下の3つのオプションがあります。

- `--soft`: HEADを指定したコミットに移動し、ステージングエリアと作業ディレクトリはそのまま保持します。

  ```bash
  git reset --soft HEAD^
  ```

  このコマンドで、直前のコミットを取り消し、変更内容はステージングエリアに残ります。 

- `--mixed`（デフォルト）: HEADとステージングエリアを指定したコミットに戻し、作業ディレクトリはそのまま保持します。

  ```bash
  git reset --mixed HEAD^
  ```

  このコマンドで、直前のコミットを取り消し、変更内容は作業ディレクトリに残ります。 

- `--hard`: HEAD、ステージングエリア、作業ディレクトリすべてを指定したコミットの状態に戻します。

  ```bash
  git reset --hard HEAD^
  ```

  このコマンドで、直前のコミットを取り消し、変更内容もすべて破棄されます。 

**注意**: `--hard`オプションは、作業ディレクトリの変更も破棄するため、慎重に使用してください。

### 2. `git revert`

`git revert`は、指定したコミットの変更を打ち消す新しいコミットを作成するコマンドです。これにより、履歴を保持しつつ変更を取り消すことができます。

```bash
git revert <コミットID>
```

例えば、コミットIDが`abc123`の場合：

```bash
git revert abc123
```

このコマンドで、`abc123`の変更を打ち消す新しいコミットが作成されます。 

**注意**: `git revert`は新しいコミットを作成するため、履歴が残ります。チームでの開発時には、履歴を保持するために`git revert`の使用が推奨されます。

### 3. `git rebase`

`git rebase`は、ブランチの基点を別のブランチに付け替えるコマンドです。これにより、履歴を直線的に整理できます。

```bash
git checkout feature-branch
git rebase main
```

このコマンドで、`feature-branch`の基点を`main`ブランチの最新コミットに変更します。 

**注意**: `git rebase`は履歴を書き換えるため、共有リポジトリの履歴を変更する際には注意が必要です。特に、他の開発者と共有しているブランチでの`rebase`は避けるべきです。

これらのコマンドを適切に活用することで、Gitでの履歴管理や変更の取り消しが効率的に行えます。次のステップでは、Gitの便利な機能とツールについて学習します。

---

**参考**

- [Git Reset・Revert・Rebase を実際に叩いて覚えてみた - Neo's Blog](https://neos21.net/blog/2017/04/05-02.html)
  - `git reset`、`git revert`、`git rebase`の使い方を実例を交えて解説しています。

- [Git のリセット、元に戻す、リベース - IT基礎](https://it-kiso.com/tech/development/git-%E3%81%AE%E3%83%AA%E3%82%BB%E3%83%83%E3%83%88%E3%80%81%E5%85%83%E3%81%AB%E6%88%BB%E3%81%99%E3%80%81%E3%83%AA%E3%83%99%E3%83%BC%E3%82%B9/)
  - `git reset`、`git revert`、`git rebase`の違いや使い分けについて詳しく説明しています。

- [git revert（リバート）とは何か？使い方を実例で解説｜マージコミットの取り消し方法も紹介](https://prograshi.com/general/git/git-revert/)
  - `git revert`の基本的な使い方や、マージコミットの取り消し方法について解説しています。 