## ステップ9: 高度なマージ戦略の理解

[目次に戻る](git学習目次.md)

Gitには、さまざまなマージ戦略が存在し、プロジェクトの特性やチームの開発フローに応じて適切な戦略を選択することが重要です。ここでは、代表的なマージ戦略とその特徴について解説します。

### 1. マージ戦略の種類

Gitには以下の主要なマージ戦略があります。

- **Recursive（再帰的）**

  デフォルトのマージ戦略で、2つのブランチをマージする際に使用されます。共通の祖先を基に3方向マージを行い、競合が発生した場合は手動で解決が必要です。 

- **Resolve**

  2つのブランチ間の単純なマージに適しています。複雑な競合がない場合に使用され、処理が高速です。 

- **Octopus**

  3つ以上のブランチを同時にマージする際に使用されます。競合が発生すると自動的にマージが中止されるため、競合のない複数ブランチの統合に適しています。 

- **Ours**

  マージ時に現在のブランチの変更を優先し、他のブランチの変更を無視します。特定のブランチの内容を保持したい場合に使用されます。 

- **Subtree**

  サブプロジェクトを持つリポジトリのマージに適しています。サブディレクトリとして他のリポジトリを取り込む際に使用されます。 

### 2. マージ戦略の選択方法

マージ時に特定の戦略を指定するには、`git merge`コマンドに`-s`オプションを付与します。例えば、`Ours`戦略を使用する場合：

```bash
git merge -s ours ブランチ名
```

ただし、デフォルトの`Recursive`戦略で十分な場合が多いため、特別な理由がない限り明示的な指定は不要です。 

### 3. 新しいマージ戦略：`ort`

Git 2.33以降、新しいマージ戦略`ort`が導入されました。これは従来の`recursive`戦略を再設計したもので、マージの精度と速度が向上しています。特に大規模なマージやリベース操作で効果を発揮します。 

---

**参考**

- [Git のマージ戦略のオプションとサンプル | Atlassian Git Tutorial](https://www.atlassian.com/ja/git/tutorials/using-branches/merge-strategy)
  - 各マージ戦略の詳細と使用例が解説されています。

- [git の Merge made by the 'ort' strategy. ってなんだ？！！ - Zenn](https://zenn.dev/lovegraph/articles/7c7d8826f37a1f)
  - 新しいマージ戦略`ort`の特徴と利点について説明しています。

- [Gitにおけるブランチ戦略について調べてみた #git-flow - Qiita](https://qiita.com/trsn_si/items/cfecbf7dff20c64628ea)
  - ブランチ戦略とマージ戦略の関係性について詳しく解説しています。 